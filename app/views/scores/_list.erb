<!-- locals: scores, paginate(optinonal) -->

<% if locals[:paginate] %>
  <% per_page = settings.config[:list][:per_page] || 20  %>
  <% page = (params[:page].presence || 1).to_i %>
  <% paginator = {controller: :scores, page: page, size: scores.count} %>
  <% scores = scores.limit(per_page).offset((page-1)*per_page) %>
<% end %>

<table class="table table-striped table-hover table-condensed">
  <%= partial "table_headers", locals: {table_headers:
      [:Score_ID, :Skater, :Nation, :Competition, :Category, :Segment, :Result_PDF, :Date, :Rank, :Starting, :TSS, :TES, :PCS, :Deductions]} %>

  <% scores.each do |score| %>
  <tr>
    <td><%= link_to(score.id, url_for(:scores, :id, id: score.id)) %></td>
    <% url = (score.skater.isu_number) ? url_for(:skaters, :isu_number, isu_number: score.skater.isu_number) : url_for(:skaters, :name, name: score.skater_name) %>
    <td><%= link_to(score.skater_name, url) %>
    <td><%= score.nation %></td>
    <td><%= link_to(score.competition_name, url_for(:competitions, :id, id: score.competition_id)) %></td>
    <td><%= link_to(score.category, url_for(:competitions, :id, id: score.competition_id, category: score.category)) %></td>

    <td><%= link_to(score.segment, url_for(:competitions, :id, id: score.competition_id, category: score.category, segment: score.segment)) %></td>
    <td><%= link_to_result_pdf(score.result_pdf) %></td>
    <td><%= (t = score.starting_time) ? t.strftime("%Y-%m-%d") : ''%></td>
    <td><%= score.rank %></td>
    <td><%= score.starting_number %></td>
    <td><%= score.tss %></td>
    <td><%= score.tes %></td>
    <td><%= score.pcs %></td>
    <td><%= score.deductions %></td>
    <td style="font-size: x-small;"><!-- %= link_to(score.technicals_summary, url_for(:scores, :id, id: score.id)) % --></td>
    <td><!-- %= link_to(score.components_summary, url_for(:scores, :id, id: score.id)) % --></td>
  </tr>
  <% end %>
</table>

<% if locals[:paginate] %>
  <%= partial 'pagination', locals: paginator %>
<% end %>
