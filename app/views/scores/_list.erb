<!-- locals: scores, paginate(optinonal) -->

<% if locals[:paginate] %>
  <% per_page = settings.config[:list][:per_page] || 20  %>
  <% page = (params[:page].presence || 1).to_i %>
  <% scores_limitted = scores.limit(per_page).offset((page-1)*per_page) %>
<% else %>
  <% scores_limitted = scores %>
<% end %>

<table class="table table-striped table-hover table-condensed">
  <tr>
    <th>Score ID</th>
    <th>Skater</th>
    <th>Nation</th>
    <th>Competition</th>
    <th>Category</th>
    <th>Segment</th>
    <th>Result PDF</th>
    <th>Date</th>
    <th>Rank</th>    
    <th>Starting</th>
    <th>TSS</th>    
    <th>TES</th>
    <th>PCS</th>
    <th>deduction</th>    
    <th>Elements</th>
    <th>Components</th>
  </tr>

  <% scores_limitted.each do |score| %>
  <tr>
    <td><%= link_to(score.id, url_for(:scores, :id, id: score.id)) %></td>
    <td><%= link_to(score.skater_name, url_for(:skaters, :name, name: score.skater_name)) %></td -->
    <td><%= score.nation %></td>
    <td><%= link_to(score.competition_name, url_for(:competitions, :id, id: score.competition_id)) %></td>
    <td><%= link_to(score.category, url_for(:competitions, :id, id: score.competition_id, category: score.category)) %></td>

    <td><%= link_to(score.segment, url_for(:competitions, :id, id: score.competition_id, category: score.category, segment: score.segment)) %></td>
    <td><%= link_to_result_pdf(score.result_pdf) %></td>
    <td><%= (t = score.starting_time) ? t.strftime("%Y-%m-%d") : ''%></td>
    <td><%= score.rank %></td>
    <td><%= score.starting_number %></td>
    <td><%= score.tss %></td>
    <td><%= score.tes %></td>
    <td><%= score.pcs %></td>
    <td><%= score.deductions %></td>
    <td style="font-size: x-small;"><%= link_to(score.technicals_summary, url_for(:scores, :id, id: score.id)) %></td>
    <td><%= link_to(score.components_summary, url_for(:scores, :id, id: score.id)) %></td>
  </tr>
  <% end %>
</table>

<% if locals[:paginate] %>
  <%= partial 'pagination', locals: {records: scores, controller: :scores, page: page} %>
<% end %>
