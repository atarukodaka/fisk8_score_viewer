<%= partial '/competitions/competition_info', locals: {competition: competition} %>
<!-- %= partial '/scores/list', locals: {scores: scores, paginate: true} % -->

<h2>Category: <%= params[:category] %></h2>

<table class="table table-striped table-hover table-condensed">
  <tr>
    <th>Rank</th>
    <th>Skater</th>
    <th>Nation</th>
    <th>Points</th>
    <th>Short Rank</th>
    <th>Free Rank</th>
  </tr>
  <% results.sort_by {|rec| (0 == (rank = rec[:rank])) ? 10_000 + rec.short_ranking : rank }.each do |rec| %>
  <tr>
    <td><%= (rec.rank == 0) ? 'FNR/WD' : rec.rank %></td>
    <% begin %>
    <td><%= link_to_skater(rec.skater) %></td>
    <% rescue %>
    <% end %>
       
    <td><%= rec.nation %></td>
    <td><%= (rec.points == 0.0) ? '' : rec.points %></td>
    <td><%= rec.short_ranking %></td>
    <td><%= rec.free_ranking %></td>    
  </tr>
  <% end %>
</table>
