<h2>Skater List</h2>


<% form_tag(url_for(:skaters, :search), method: 'post') do %>
<div class="form-group row">
  <div class="col-sm-2">
    <%= label_tag(:name) %>
  </div>
  <div class="col-sm-10">
    <%= text_field_tag(:name, :class=>"form-control") %>
  </div>
</div>


<div class="form-group row">
  <div class="col-sm-2">
    <%= label_tag("Category") %>
  </div>
  <div class="col-sm-10">
    <% categories = ['-', 'MEN', 'LADIES'] %>
    <%= select_tag_kept(:category, options: categories, selected: params[:category]) %>
  </div>
</div>

<div class="form-group row">
  <div class="col-sm-2">
    <%= label_tag("Nation") %>
  </div>
  <div class="col-sm-10">
    <% nations = ['-', Score.select(:nation).distinct.to_a.map {|n| n.nation}].flatten %>
    <%= select_tag_kept(:nation, options: nations, selected: params[:nation]) %>

  </div>
</div>

<div class="form-group row">
  <div class="col-sm-2">
  </div>
  <div class="col-sm-10">
    <%= submit_tag("search", :class=>"btn btn-primary", :type=>"submit") %>
  </div>
</div>
<% end %>


<table class="table table-striped table-hover table-condensed">
  <tr>
    <th>Skater</th>
    <th>Nation</th>
    <th>Category</th>
    <th>ISU Number</th>
  </tr>
  <% skaters.each do |skater| %>
  <tr>
    <td><%= link_to(skater.name, "/skaters/name/#{skater.name}") %><!-- %= link_to(skater.skater, url_for(:skaters, :show, name: skater.skater)) % --></td>
    <td><%= skater.nation %></td>
    <td><%= skater.category %></td>
    <td><%= skater.isu_number %></td>
  </tr>
  <% end %>
</table>
